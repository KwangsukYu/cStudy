# 동기와 비동기의 개념

## 동기란?

- 동기적으로 동작하는 것을 가장 쉽게 이해를 하려면 다음과 같이 생각
  - 무조건 코드는 순서대로 항상 앞줄의 코드가 실행되지 않으면 뒤의 코드는 실행되지 않는다

## 비동기란?

- 비동기적으로 동작하는 것을 가장 쉽게 이해를 하려면 다음과 같이 생각
  - 비동기 방식은 한 줄 한 줄 순서대로 실행되는 것이 아님

**NODEjs**
- 클라이언트의 요청으로 비동기로 처리하기 위하여 이벤트가 발생 Event Loop가 처리
- Event Loop가 처리하는 동안 제어권은 다음 요청으로 넘어가고 처리가 완료되면 Callback을 호출하여 처리완료를 호출측에 알려줌
  
**사용환경**
- 각 단위 작업이 아주 짧은 시간 안에 처리된다면 Node.js의 고성능의 병렬처리의 장점을 극대화

**주의**
- CPU를 많이 사용하는 처리 작업이나 대용량 파일을 처리하는 작업에선 지양함

## 동기와 비동기를 열차에 비유

### 동기

- 동기는 동일한 기찻길에 놓인 열차
  - 앞의 열차가 꾸물거리거나 멈춰 있으면 뒤의 열차가 나아갈 수 없음

### 비동기
- 비동기는 필요에 따라서 이동이느리거나 자주 서는 열차를 다른 선로에 배치하는 것
  - 이렇게 하면 뒤의 열차가 막힐 일이 없음


## 자바스크립트의 비동기

- http통신을 위한 방법은 대표적으로 3개(Ajax, Axios, fetch)가 있음.

## AJAX(Asynchronous Javascript And Xml)

- ajax는 비동기식 자바스크립트와 XML이란 뜻
- 데이터를 이동하고 화면을 구성하는데 화면 갱신 없이 필요한 데이터를 서버로 보내고 응답을 가져오는 방법

- 사용하는 이유
  - WEB화면에서 무엇인가 부르거나 데이터를 조회하고 싶을 때 페이지 전체를 새로고침하고 싶지 않아서라고 표현할 수 있음
  
### 데이터 형식
- ajax에서는 크게 csv, json, xml형식으로 보내지게 됨

- csv 형식
  - , 로 데이터 속성을 나누고 줄바꿈으로 데이터를 나누는 방식
  - 장점 : 용량이 적음
  - 단점 : 가독성이 떨어짐


- xml 형식
  - csv 형식의 가독성을 개선하기 위해 나온 형식으로, 속성과 데이터를 구분
  - 장점 : csv에 비해 가독성이 좋음
  - 단점 : 용량이 크며 데이터가 많아지며 분석력이 떨어짐


- json 형식
  - javascript 객체 형태로 데이터를 전송하며, 가장 많이 쓰이는 형식
  - 장점 : 가독성도 좋고 용량도 적음
  - 단점 : 여전히 데이터가 많아지며 분석 속도가 떨어짐
  

## Axios

- node.js와 브라우저를 위한 promise 기반의 http통신 라이브러리
- fetch와 달리 크로스 브라우징에 최적화되어 있어 IE11까지 모조리 지원(호환성에 중점을 둠)
- 편리하고 기능이 많아 프론트 프레임워크에서는 사용을 권장


## fetch

- javascript의 내장 라이브러이기 때문에 import 하지 않고 사용할 수 있음
- 라이브러리의 업데이트에 따른 에러 방지가 가능
- 네트워크 에러가 발생했을 때 기다려야 함
- 지원하지 않은 브라우저가 있음
- return값은 Promise 객체 형태



## 콜백 방식

- 자바 스크립트에서 함수는 일급 객체이므로 파라미터로 넘길 수 있음 이런 함수를 콜백이라고 함.
  - 일급 객체?
    - 변수나 데이터에 할당 가능
    - 객체의 인자로 넘길 수 있음
    - 리턴값으로 사용 가능

- 하지만 복잡한 비동기 데이터 흐름을 표현하기가 어려워 많은 프로그래머들이 힘들어함, 결국 콜백 지옥이라는 용어까지 생겨남


## Promise 방식
- 위에서 설명한 콜백의 문제를 해결하기 위해 선택된 방법
- 비동기를 간편하게 처리할 수 있도록 도와주는 객체
- `Promise`는 정해진 기능을 수행한 후, 정상적으로 기능이 수행되면 성공의 메세지와 결과값을 전달, 문제가 발생하면 에러를 전달해줌
- 쉽게 말해서 성공과 실패를 분리



# 예상문제
1. 동기와 비동기의 차이?
   - 동기식 - 요청과 결과가 동시에 이루어지는 것. 설계가 간단하지만 결과가 주어질 때까지 아무것도 못하고 대기해야 하므로 비동기식 보다 비효율적
   - 비동기식 - 요청과 결과가 동시에 이루어지지 않는 것. 하나의 요청을 처리하는 동안 다른 요청도 처리가능. 동기보다 복잡하고 결과가 주어지는데 시간이 걸리더라도 그동안 다른 작업을 할 수 있으므로 자원을 효율적으로 사용할 수 있음.




자바스크립트 동작원리 - 브라우저 동작원리

call back -> promise -> async -> await